<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Parameter Binding | Minimal APIs</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Building APIs in C#">
    <meta name="theme-color" content="#d9C5C1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c9c98798.css" as="style"><link rel="preload" href="/assets/js/app.ac332cf9.js" as="script"><link rel="preload" href="/assets/js/2.2bd089a4.js" as="script"><link rel="preload" href="/assets/js/13.d91548c1.js" as="script"><link rel="prefetch" href="/assets/js/10.5d8d1e81.js"><link rel="prefetch" href="/assets/js/11.add2209d.js"><link rel="prefetch" href="/assets/js/12.7aa50d5b.js"><link rel="prefetch" href="/assets/js/14.40f9daca.js"><link rel="prefetch" href="/assets/js/15.afaafacf.js"><link rel="prefetch" href="/assets/js/16.0c95cc17.js"><link rel="prefetch" href="/assets/js/17.06f7bb9b.js"><link rel="prefetch" href="/assets/js/18.0e07dd6a.js"><link rel="prefetch" href="/assets/js/19.5e96ddbc.js"><link rel="prefetch" href="/assets/js/20.eba95d43.js"><link rel="prefetch" href="/assets/js/21.e40cf0df.js"><link rel="prefetch" href="/assets/js/22.cd43dcc4.js"><link rel="prefetch" href="/assets/js/23.8da194c6.js"><link rel="prefetch" href="/assets/js/24.6c0b92de.js"><link rel="prefetch" href="/assets/js/3.2e7fa9cd.js"><link rel="prefetch" href="/assets/js/4.9d8f745a.js"><link rel="prefetch" href="/assets/js/5.0ac92ac3.js"><link rel="prefetch" href="/assets/js/6.1fae0437.js"><link rel="prefetch" href="/assets/js/7.2d00f8e9.js"><link rel="prefetch" href="/assets/js/8.aecd003b.js"><link rel="prefetch" href="/assets/js/9.4a670d5b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c9c98798.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Minimal APIs" class="logo"> <span class="site-name can-hide">Minimal APIs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hello-minimal/" class="nav-link">
  Hello Minimal
</a></div><div class="nav-item"><a href="/quickstart/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><a href="https://github.com/Minimal-APIs/samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.microsoft.com/aspnet/core/fundamentals/minimal-apis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Microsoft Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hello-minimal/" class="nav-link">
  Hello Minimal
</a></div><div class="nav-item"><a href="/quickstart/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><a href="https://github.com/Minimal-APIs/samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.microsoft.com/aspnet/core/fundamentals/minimal-apis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Microsoft Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Guide to minimal APIs</a></li><li><a href="/guide/routing.html" class="sidebar-link">Routing</a></li><li><a href="/guide/parameter-binding.html" aria-current="page" class="active sidebar-link">Parameter Binding</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#conventions" class="sidebar-link">Conventions</a></li><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#attributes" class="sidebar-link">Attributes</a></li><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#well-known-types" class="sidebar-link">Well-Known Types</a></li><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#bindasync" class="sidebar-link">BindAsync</a></li><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#tryparse" class="sidebar-link">TryParse</a></li><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#services" class="sidebar-link">Services</a></li><li class="sidebar-sub-header"><a href="/guide/parameter-binding.html#json-request-body" class="sidebar-link">JSON Request Body</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="parameter-binding"><a href="#parameter-binding" class="header-anchor">#</a> Parameter Binding</h1> <p><strong>Level: Intermediate</strong> üçÉüçÉ</p> <p>Starting in .NET 6, route handlers (the Delegate parameters in <a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.endpointroutebuilderextensions" target="_blank" rel="noopener noreferrer">EndpointRouteBuilderExtensions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> methods) can accept more than just an <code>HttpContext</code> as a parameter. Route handlers can now accept any number of parameters with various types bound from different sources. This guide describes the conventions that determine how each parameter is populated.</p> <h2 id="conventions"><a href="#conventions" class="header-anchor">#</a> Conventions</h2> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>app<span class="token punctuation">.</span><span class="token function">MapPut</span><span class="token punctuation">(</span><span class="token string">&quot;/todos/{id}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token class-name">TodoDb</span> db<span class="token punctuation">,</span> <span class="token class-name">TodoItem</span> updateTodo<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The route handler above accepts three parameters:</p> <ol><li><code>TodoDb db</code> which comes from the service provider.</li> <li><code>TodoItem updateTodo</code> which is read as JSON from the request body.</li> <li><code>int id</code> which is read from the <code>{id}</code> segment of the route.</li></ol> <p>These were all determined by convention but could be specified explicitly with attributes as follows:</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

app<span class="token punctuation">.</span><span class="token function">MapPut</span><span class="token punctuation">(</span><span class="token string">&quot;/todos/{id}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromService</span></span><span class="token punctuation">]</span> <span class="token class-name">TodoDb</span> db<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name">TodoItem</span> updateTodo<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromRoute</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span> nameDoesNotMatter<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Parameters sources are determined using the following rules applied in order:</p> <ol><li><a href="#attributes">Parameter attributes</a> take precedence over conventions if they are present.</li> <li>Any <a href="#well-known-types">well-known types</a> are bound from the <a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext" target="_blank" rel="noopener noreferrer">HttpContext<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or one of its properties.</li> <li><code>string</code> parameters are bound from <code>HttpContext.RouteValues[{ParameterName}]</code> when <code>{ParameterName}</code> is part of the route pattern or <code>HttpContext.Query[{ParameterName}]</code> otherwise.</li> <li>Types with public static <a href="#bindasync">BindAsync</a> methods are bound using <code>BindAsync</code>.</li> <li>Types with public static <a href="#tryparse">TryParse</a> methods are bound by calling <code>TryParse</code> with <code>HttpContext.RouteValues[{ParameterName}]</code> or <code>HttpContext.Query[{ParameterName}]</code> depending on whether <code>{ParameterName}</code> is part of the route pattern. This includes most built-in numeric types, enums, <code>DateTime</code>, <code>TimeSpan</code> and more.</li> <li>Types registered as a service are bound from request services.</li> <li>Any remaining types are bound from the request body as JSON.</li></ol> <h2 id="attributes"><a href="#attributes" class="header-anchor">#</a> Attributes</h2> <h3 id="fromroute"><a href="#fromroute" class="header-anchor">#</a> <code>[FromRoute]</code></h3> <p><a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.mvc.fromrouteattribute" target="_blank" rel="noopener noreferrer">FromRouteAttribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implements <code>Microsoft.AspNetCore.Http.Metadata.IFromRouteMetadata</code>. Any attribute implementing this interface is equivalent. This will bind the parameter from <code>HttpRequest.RouteValues[{ParameterName}]</code>. If the parameter is not a string, the parameter type's <a href="#tryparse">TryParse</a> method will be called to convert the string to the parameter type.</p> <p>If the <code>Name</code> property is provided (e.g. <code>[FromRoute(Name = &quot;id&quot;)]</code>), the name specified using the property is used instead of the parameter name.</p> <h3 id="fromquery"><a href="#fromquery" class="header-anchor">#</a> <code>[FromQuery]</code></h3> <p><a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.mvc.fromqueryattribute" target="_blank" rel="noopener noreferrer">FromQueryAttribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implements <code>Microsoft.AspNetCore.Http.Metadata.IFromQueryMetadata</code>. Any attribute implementing this interface is equivalent. This will bind the parameter from <code>HttpRequest.Query[{ParameterName}]</code>. If the parameter is not a string, the parameter type's <a href="#tryparse">TryParse</a> method will be called to convert the string to the parameter type.</p> <p>If the <code>Name</code> property is provided (e.g. <code>[FromQuery(Name = &quot;page&quot;)]</code>), the name specified using the property is used instead of the parameter name.</p> <h3 id="fromheader"><a href="#fromheader" class="header-anchor">#</a> <code>[FromHeader]</code></h3> <p><a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.mvc.fromheaderattribute" target="_blank" rel="noopener noreferrer">FromHeaderAttribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implements <code>Microsoft.AspNetCore.Http.Metadata.IFromHeaderMetadata</code>. Any attribute implementing this interface is equivalent. This will bind the parameter from <code>HttpRequest.Headers[{ParameterName}]</code>. If the parameter is not a string, the parameter type's <a href="#tryparse">TryParse</a> method will be called to convert the string to the parameter type.</p> <p>If the <code>Name</code> property is provided (e.g. <code>[FromHeader(Name = &quot;X-My-Custom-Header&quot;)]</code>), the name specified using the property is used instead of the parameter name.</p> <h3 id="fromservices"><a href="#fromservices" class="header-anchor">#</a> <code>[FromServices]</code></h3> <p><a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.mvc.fromservicesattribute" target="_blank" rel="noopener noreferrer">FromServicesAttribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implements <code>Microsoft.AspNetCore.Http.Metadata.IFromServiceMetadata</code>. Any attribute implementing this interface is equivalent. This will bind the parameter from request services as described in the <a href="#services">Services section</a> of this doc.</p> <h3 id="frombody"><a href="#frombody" class="header-anchor">#</a> <code>[FromBody]</code></h3> <p><a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.mvc.frombodyattribute" target="_blank" rel="noopener noreferrer">FromBodyAttribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implements <code>Microsoft.AspNetCore.Http.Metadata.IFromBodyMetadata</code>. Any attribute implementing this interface is equivalent. This will bind the parameter from the request body as JSON as described in the <a href="#json-request-body">JSON Request Body section</a> of this doc.</p> <p>If the <code>EmptyBodyBehavior</code> property is set to <code>EmptyBodyBehavior.Allow</code> (e.g. <code>[FromBody(EmptyBodyBehavior = EmptyBodyBehavior.Allow)]</code>), the parameter will be set to <code>null</code> or its <code>default</code> value if the request body is empty. This corresponds to the <code>IFromBodyMetadata.AllowEmpty</code> being true.</p> <h2 id="well-known-types"><a href="#well-known-types" class="header-anchor">#</a> Well-Known Types</h2> <p>If the delegate parameters are any of the following types, they will be populated from the <a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext" target="_blank" rel="noopener noreferrer">HttpContext<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ul><li>HttpContext</li> <li>HttpRequest (<code>HttpContext.Request</code>)</li> <li>HttpResponse (<code>HttpContext.Response</code>)</li> <li>ClaimsPrincipal (<code>HttpContext.User</code>)</li> <li>CancellationToken (<code>HttpContext.RequestAborted</code>)</li></ul> <h2 id="bindasync"><a href="#bindasync" class="header-anchor">#</a> BindAsync</h2> <p>If the parameter type, one of its parent/ancestor types or any of its implemented interfaces define a public static <code>BindAsync</code> method with one of the following signatures, the parameter will be bound using <code>BindAsync</code> assuming no parameter attribute specified another source.</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>{ParameterType}<span class="token punctuation">&gt;</span></span> <span class="token function">BindAsync</span><span class="token punctuation">(</span><span class="token class-name">HttpContext</span> context<span class="token punctuation">,</span> <span class="token class-name">ParameterInfo</span> parameter<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Or</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>{ParameterType}<span class="token punctuation">&gt;</span></span> <span class="token function">BindAsync</span><span class="token punctuation">(</span><span class="token class-name">HttpContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The return value can be either <code>ValueTask&lt;{ParameterType}&gt;</code> or <code>ValueTask&lt;{ParameterType}?&gt;</code>. Whether or not returning a <code>null</code> value results in an error is determined by the nullability of the parameter type. If the parameter type is non-nullable, the route handler will not be called and a bad request will be logged. If the parameter type is nullable, the route handler will be supplied a null value for the given parameter.</p> <p>In the case where both overloads are defined anywhere in the parameter type's hierarchy, the <code>BindAsync</code> method with the <code>ParameterInfo</code> argument will be called.</p> <p>If there is more than one <code>BindAsync</code> method with the same signature, the method from the most derived type will be called. <code>BindAsync</code> methods on interfaces are chosen last. A parameter type implementing more than one interface defining matching <code>BindAsync</code> methods is an error.</p> <h2 id="tryparse"><a href="#tryparse" class="header-anchor">#</a> TryParse</h2> <p>If the parameter type, one of its parent/ancestor types or any of its implemented interfaces define a public static <code>TryParse</code> method with one of the following signatures, the parameter will be bound using <code>TryParse</code> using the <code>string</code> from the source specified in the <a href="#conventions">Conventions section</a> of this document.</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">IFormatProvider</span> formatProvider<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token punctuation">{</span>ParameterType<span class="token punctuation">}</span> result<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Or</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token punctuation">{</span>ParameterType<span class="token punctuation">}</span> result<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Whether or not returning false is an error is determined by the nullability of parameter type. If the parameter type is non-nullable, the route handler will not be called and a bad request will be logged. If the parameter type is nullable, the route handler will be supplied a null value for the given parameter.</p> <p>In the case where both overloads are defined anywhere in the parameter type's hierarchy, the <code>TryParse</code> method with the <code>IFormatProvider</code> parameter will be called.</p> <p>If there is more than one <code>TryParse</code> method with the same signature, the method from the most derived type will be called. <code>TryParse</code> methods on interfaces are chosen last. A parameter type implementing more than one interface defining matching <code>TryParse</code> methods is an error.</p> <h2 id="services"><a href="#services" class="header-anchor">#</a> Services</h2> <p>Service parameters are resolved from <code>HttpContext.RequestServices.GetService(typeof({ParameterType}))</code>.</p> <p>Whether or not a given parameter type is a service is determined using <code>IServiceProviderIsService</code> unless the parameter is explicitly attributed with <code>[FromServices]</code>. Given the <code>[FromServices]</code> attribute, the parameter type is assumed to exist in the service provider.</p> <p>For non-nullable parameters, the parameter type must be resolvable as a service for the route handler to be called. If the service does not exist, an exception will be thrown when the endpoint is hit. For nullable parameters, the route handler will be supplied a null value for the given parameter.</p> <p><a href="https://docs.microsoft.com/dotnet/api/microsoft.extensions.dependencyinjection.iserviceproviderisservice.isservice" target="_blank" rel="noopener noreferrer">IServiceProviderIsService<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a new interface introduced in .NET 6 that is implemented by the default service provider and some third-party containers. If <code>IServiceProviderIsService</code> itself is not available as a service, the <code>[FromServices]</code> attribute must be used to resolve parameters from services.</p> <h2 id="json-request-body"><a href="#json-request-body" class="header-anchor">#</a> JSON Request Body</h2> <p>JSON request bodies are read using the <a href="https://docs.microsoft.com/dotnet/api/system.net.http.json.httpcontentjsonextensions.readfromjsonasync#System_Net_Http_Json_HttpContentJsonExtensions_ReadFromJsonAsync__1_System_Net_Http_HttpContent_System_Text_Json_JsonSerializerOptions_System_Threading_CancellationToken_" target="_blank" rel="noopener noreferrer">ReadFromJsonAsync<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> extension method. This can be configured like all other calls to <code>ReadFromJsonAsync</code> using the <a href="https://docs.microsoft.com/aspnet/core/fundamentals/configuration/#configure-options-with-a-delegate-1" target="_blank" rel="noopener noreferrer">options pattern<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to configure <a href="https://docs.microsoft.com/dotnet/api/microsoft.aspnetcore.http.json.jsonoptions" target="_blank" rel="noopener noreferrer">JsonOptions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>For non-nullable parameters, empty request bodies are disallowed by default. If a request matching the route pattern has an empty body, the route handler will not be called and a bad request will be logged.</p> <p>Empty request bodies are always allowed when the parameter is nullable even if <code>EmptyBodyBehavior.Disallow</code> is set via the <code>[FromBody]</code> attribute.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/guide/routing.html" class="prev">
        Routing
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ac332cf9.js" defer></script><script src="/assets/js/2.2bd089a4.js" defer></script><script src="/assets/js/13.d91548c1.js" defer></script>
  </body>
</html>
