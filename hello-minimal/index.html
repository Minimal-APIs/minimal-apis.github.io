<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hello Minimal APIs 👋🏾 | Minimal APIs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Building APIs in C#">
    <meta name="theme-color" content="#d9C5C1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c9c98798.css" as="style"><link rel="preload" href="/assets/js/app.b5e398f3.js" as="script"><link rel="preload" href="/assets/js/2.9f025ea5.js" as="script"><link rel="preload" href="/assets/js/15.f83e5e20.js" as="script"><link rel="prefetch" href="/assets/js/10.777a77a2.js"><link rel="prefetch" href="/assets/js/11.b74f7531.js"><link rel="prefetch" href="/assets/js/12.e9dd754b.js"><link rel="prefetch" href="/assets/js/13.a4e29b0d.js"><link rel="prefetch" href="/assets/js/14.ca682c04.js"><link rel="prefetch" href="/assets/js/16.506b0eb8.js"><link rel="prefetch" href="/assets/js/17.25d71576.js"><link rel="prefetch" href="/assets/js/18.c415dd21.js"><link rel="prefetch" href="/assets/js/19.cd369711.js"><link rel="prefetch" href="/assets/js/20.518c96c8.js"><link rel="prefetch" href="/assets/js/21.f1a059c5.js"><link rel="prefetch" href="/assets/js/22.16bbca0f.js"><link rel="prefetch" href="/assets/js/23.758f1ca8.js"><link rel="prefetch" href="/assets/js/3.d1455d62.js"><link rel="prefetch" href="/assets/js/4.9914ac36.js"><link rel="prefetch" href="/assets/js/5.6be672ae.js"><link rel="prefetch" href="/assets/js/6.58b48595.js"><link rel="prefetch" href="/assets/js/7.c05cc930.js"><link rel="prefetch" href="/assets/js/8.93e63234.js"><link rel="prefetch" href="/assets/js/9.77e27d37.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c9c98798.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="logo.png" alt="Minimal APIs" class="logo"> <span class="site-name can-hide">Minimal APIs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hello-minimal/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Hello Minimal
</a></div><div class="nav-item"><a href="/quickstart/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><a href="https://github.com/Minimal-APIs/samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.microsoft.com/aspnet/core/fundamentals/minimal-apis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Microsoft Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hello-minimal/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Hello Minimal
</a></div><div class="nav-item"><a href="/quickstart/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><a href="https://github.com/Minimal-APIs/samples" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Samples
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.microsoft.com/aspnet/core/fundamentals/minimal-apis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Microsoft Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Examples</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hello-minimal/" aria-current="page" class="active sidebar-link">Hello Minimal APIs 👋🏾</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hello-minimal/#application" class="sidebar-link">Application</a></li><li class="sidebar-sub-header"><a href="/hello-minimal/#webapplicationbuilder" class="sidebar-link">WebApplicationBuilder</a></li><li class="sidebar-sub-header"><a href="/hello-minimal/#routing" class="sidebar-link">Routing</a></li><li class="sidebar-sub-header"><a href="/hello-minimal/#parameter-binding" class="sidebar-link">Parameter Binding</a></li><li class="sidebar-sub-header"><a href="/hello-minimal/#responses" class="sidebar-link">Responses</a></li><li class="sidebar-sub-header"><a href="/hello-minimal/#authorization" class="sidebar-link">Authorization</a></li><li class="sidebar-sub-header"><a href="/hello-minimal/#openapi-swagger" class="sidebar-link">OpenAPI/Swagger</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hello-minimal-apis-👋🏾"><a href="#hello-minimal-apis-👋🏾" class="header-anchor">#</a> Hello Minimal APIs 👋🏾</h1> <h2 id="application"><a href="#application" class="header-anchor">#</a> Application</h2> <h3 id="creating-an-application"><a href="#creating-an-application" class="header-anchor">#</a> Creating an application</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>This listens to port http://localhost:5000 and https://localhost:5001 by default.</p> <h3 id="changing-the-port"><a href="#changing-the-port" class="header-anchor">#</a> Changing the port</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="multiple-ports"><a href="#multiple-ports" class="header-anchor">#</a> Multiple ports</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span>Urls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span>Urls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:4000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="reading-the-port-from-environment"><a href="#reading-the-port-from-environment" class="header-anchor">#</a> Reading the port from environment</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> port <span class="token operator">=</span> Environment<span class="token punctuation">.</span><span class="token function">GetEnvironmentVariable</span><span class="token punctuation">(</span><span class="token string">&quot;PORT&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&quot;3000&quot;</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;http://localhost:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">port</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="https-with-development-certificate"><a href="#https-with-development-certificate" class="header-anchor">#</a> HTTPS with development certificate</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span>Urls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;https://localhost:3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="https-with-custom-certificate"><a href="#https-with-custom-certificate" class="header-anchor">#</a> HTTPS with custom certificate</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Configure the cert and the key</span>
builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">[</span><span class="token string">&quot;Kestrel:Certificates:Default:Path&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;site.crt&quot;</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">[</span><span class="token string">&quot;Kestrel:Certificates:Default:KeyPath&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;site.key&quot;</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span>Urls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;https://localhost:3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="reading-the-environment"><a href="#reading-the-environment" class="header-anchor">#</a> Reading the environment</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>app<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">UseExceptionHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/oops&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/oops&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Oops! An error happened.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="reading-configuration"><a href="#reading-configuration" class="header-anchor">#</a> Reading configuration</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;The configuration value is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">app<span class="token punctuation">.</span>Configuration<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="logging"><a href="#logging" class="header-anchor">#</a> Logging</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span>Logger<span class="token punctuation">.</span><span class="token function">LogInformation</span><span class="token punctuation">(</span><span class="token string">&quot;The application started&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="webapplicationbuilder"><a href="#webapplicationbuilder" class="header-anchor">#</a> WebApplicationBuilder</h2> <h3 id="changing-the-content-root-application-name-and-environment"><a href="#changing-the-content-root-application-name-and-environment" class="header-anchor">#</a> Changing the content root, application name and environment</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebApplicationOptions</span>
<span class="token punctuation">{</span>
    ApplicationName <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Program</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">.</span>FullName<span class="token punctuation">,</span>
    ContentRootPath <span class="token operator">=</span> Directory<span class="token punctuation">.</span><span class="token function">GetCurrentDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    EnvironmentName <span class="token operator">=</span> Environments<span class="token punctuation">.</span>Staging
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Application Name: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">builder<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>ApplicationName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Environment Name: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">builder<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>EnvironmentName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;ContentRoot Path: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">builder<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>ContentRootPath</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="changing-the-content-root-application-name-and-environment-2"><a href="#changing-the-content-root-application-name-and-environment-2" class="header-anchor">#</a> Changing the content root, application name and environment</h3> <p>These may also be specified via the following environment variables:</p> <ul><li><code>ASPNETCORE_ENVIRONMENT</code></li> <li><code>ASPNETCORE_CONTENTROOT</code></li> <li><code>ASPNETCORE_APPLICATIONNAME</code></li></ul> <p>OR via command line arguments:</p> <ul><li><code>--applicationName</code></li> <li><code>--environment</code></li> <li><code>--contentRoot</code></li></ul> <h3 id="adding-configuration-providers"><a href="#adding-configuration-providers" class="header-anchor">#</a> Adding configuration providers</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span><span class="token function">AddIniFile</span><span class="token punctuation">(</span><span class="token string">&quot;appsettings.ini&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="reading-configuration-2"><a href="#reading-configuration-2" class="header-anchor">#</a> Reading configuration</h3> <p>By default the <code>WebApplicationBuilder</code> reads configuration from:</p> <ul><li><code>appSettings.json</code></li> <li><code>appSettings.{environment}.json</code></li> <li>environment variables</li> <li>The command line</li></ul> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Reads the ConnectionStrings section of configuration and looks for a sub key called Todos</span>
<span class="token class-name"><span class="token keyword">var</span></span> connectionString <span class="token operator">=</span> builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;Todos&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;My connection string is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">connectionString</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="reading-the-environment-2"><a href="#reading-the-environment-2" class="header-anchor">#</a> Reading the environment</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>builder<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Running in development&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="adding-logging-providers"><a href="#adding-logging-providers" class="header-anchor">#</a> Adding logging providers</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Configure JSON logging to the console</span>
builder<span class="token punctuation">.</span>Logging<span class="token punctuation">.</span><span class="token function">AddJsonConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="adding-services"><a href="#adding-services" class="header-anchor">#</a> Adding services</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add the memory cache services</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddMemoryCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a custom scoped service</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITodoRepository<span class="token punctuation">,</span> TodoRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="customizing-the-ihostbuilder"><a href="#customizing-the-ihostbuilder" class="header-anchor">#</a> Customizing the IHostBuilder</h3> <p>Existing extension methods on <code>IHostBuilder</code> can be accessed using the <code>Host</code> property.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait 30 seconds for graceful shutdown</span>
builder<span class="token punctuation">.</span>Host<span class="token punctuation">.</span><span class="token function">ConfigureHostOptions</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>ShutdownTimeout <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="customizing-the-iwebhostbuilder"><a href="#customizing-the-iwebhostbuilder" class="header-anchor">#</a> Customizing the IWebHostBuilder</h3> <p>Existing extension methods on <code>IWebHostBuilder</code> can be accessed using the <code>WebHost</code> property.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Change the HTTP server implemenation to be HTTP.sys based</span>
builder<span class="token punctuation">.</span>WebHost<span class="token punctuation">.</span><span class="token function">UseHttpSys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="changing-the-web-root"><a href="#changing-the-web-root" class="header-anchor">#</a> Changing the web root</h3> <p>By default, the web root is relative to the content root in the <code>wwwroot</code> folder. This is where the static files
middleware expects to find static files. You can change this by using the <code>UseWebRoot</code> method on the <code>WebHost</code> property:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Look for static files in webroot</span>
builder<span class="token punctuation">.</span>WebHost<span class="token punctuation">.</span><span class="token function">UseWebRoot</span><span class="token punctuation">(</span><span class="token string">&quot;webroot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="custom-dependency-injection-container"><a href="#custom-dependency-injection-container" class="header-anchor">#</a> Custom dependency injection container</h3> <p>This example uses <a href="https://autofac.readthedocs.io/en/latest/integration/aspnetcore.html" target="_blank" rel="noopener noreferrer">Autofac<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

builder<span class="token punctuation">.</span>Host<span class="token punctuation">.</span><span class="token function">UseServiceProviderFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutofacServiceProviderFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Register your own things directly with Autofac here. Don't</span>
<span class="token comment">// call builder.Populate(), that happens in AutofacServiceProviderFactory</span>
<span class="token comment">// for you.</span>
builder<span class="token punctuation">.</span>Host<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConfigureContainer</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ContainerBuilder<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>builder <span class="token operator">=&gt;</span> builder<span class="token punctuation">.</span><span class="token function">RegisterModule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyApplicationModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="adding-middleware"><a href="#adding-middleware" class="header-anchor">#</a> Adding Middleware</h3> <p>Any existing ASP.NET Core middleware can be configured on the WebApplication:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Setup the file server to serve static files</span>
app<span class="token punctuation">.</span><span class="token function">UseFileServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="developer-exception-page"><a href="#developer-exception-page" class="header-anchor">#</a> Developer Exception Page</h3> <p>The WebApplication has a the developer exception enabled by default when the environment is development:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InvalidOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Navigating to <code>/</code> will render a friendly page that shows the exception.</p> <h3 id="asp-net-core-middleware"><a href="#asp-net-core-middleware" class="header-anchor">#</a> ASP.NET Core Middleware</h3> <table><thead><tr><th>Middleware</th> <th>Description</th> <th>API</th></tr></thead> <tbody><tr><td>Authentication</td> <td>Provides authentication support.</td> <td><code>app.UseAuthentication()</code></td></tr> <tr><td>Authorization</td> <td>Provides authorization support.</td> <td><code>app.UseAuthorization()</code></td></tr> <tr><td>CORS</td> <td>Configures Cross-Origin Resource Sharing.</td> <td><code>app.UseCors()</code></td></tr> <tr><td>Exception Handler</td> <td>Globally handles exceptions thrown by the middleware pipeline.</td> <td><code>app.UseExceptionHandler()</code></td></tr> <tr><td>Forwarded Headers</td> <td>Forwards proxied headers onto the current request.</td> <td><code>app.UseForwardedHeaders()</code></td></tr> <tr><td>HTTPS Redirection</td> <td>Redirect all HTTP requests to HTTPS.</td> <td><code>app.UseHttpsRedirection()</code></td></tr> <tr><td>HTTP Strict Transport Security (HSTS)</td> <td>Security enhancement middleware that adds a special response header.</td> <td><code>app.UseHsts()</code></td></tr> <tr><td>Request Logging</td> <td>Provides support for logging HTTP requests and responses.</td> <td><code>app.UseHttpLogging()</code></td></tr> <tr><td>W3C Request Logging</td> <td>Provides support for logging HTTP requests and responses in the <a href="https://www.w3.org/TR/WD-logfile.html" target="_blank" rel="noopener noreferrer">W3C format<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td> <td><code>app.UseW3CLogging()</code></td></tr> <tr><td>Response Caching</td> <td>Provides support for caching responses.</td> <td><code>app.UseResponseCaching()</code></td></tr> <tr><td>Response Compression</td> <td>Provides support for compressing responses.</td> <td><code>app.UseResponseCompression()</code></td></tr> <tr><td>Session</td> <td>Provides support for managing user sessions.</td> <td><code>app.UseSession()</code></td></tr> <tr><td>Static Files</td> <td>Provides support for serving static files and directory browsing.</td> <td><code>app.UseStaticFiles()</code>, <code>app.UseFileServer()</code></td></tr> <tr><td>WebSockets</td> <td>Enables the WebSockets protocol.</td> <td><code>app.UseWebSockets()</code></td></tr></tbody></table> <h2 id="routing"><a href="#routing" class="header-anchor">#</a> Routing</h2> <p>You can route to handlers using the various Map* methods on <code>WebApplication</code>. There's a <code>Map{HTTPMethod}</code> method to allow handling different HTTP methods:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is a GET&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is a POST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapPut</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is a PUT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapDelete</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is a DELETE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Other HTTP methods:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapMethods</span><span class="token punctuation">(</span><span class="token string">&quot;/options-or-head&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;HEAD&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is an options or head request &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="route-handlers"><a href="#route-handlers" class="header-anchor">#</a> Route Handlers</h3> <p>Route handlers are methods that execute when the a route matches. Route handlers can be a function or any shape (including synchronous or asynchronous). It can be a lambda expression, a local function,
an instance method or a static method.</p> <p><strong>Lambda expression</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is an inline lambda&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> handler <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is a lambda variable&quot;</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Local function</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">LocalFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This is local function&quot;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> LocalFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Instance method</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">.</span>Hello<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloHandler</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Static method</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> HelloHandler<span class="token punctuation">.</span>Hello<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloHandler</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>This provides the appropriate flexiblity when deciding how to organize your route handlers.</p> <h3 id="naming-routes-and-link-generation"><a href="#naming-routes-and-link-generation" class="header-anchor">#</a> Naming routes and link generation</h3> <p>Routes can be given names in order to generate URLs to them. This avoids having to hard code paths in your application.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello there&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">WithName</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">LinkGenerator</span> linker<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;The link to the hello route is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">linker<span class="token punctuation">.</span><span class="token function">GetPathByName</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">values</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Route names are inferred from method names if specified:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello there&quot;</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> Hi<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">LinkGenerator</span> linker<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;The link to the hello route is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">linker<span class="token punctuation">.</span><span class="token function">GetPathByName</span><span class="token punctuation">(</span><span class="token string">&quot;Hi&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">values</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>NOTE: Route names are case sensitive!</strong></p> <p>These names must be globally unique and are also used as the OpenAPI operation id when OpenAPI support is enabled (see the OpenAPI/Swagger section for more details).</p> <h3 id="route-parameters"><a href="#route-parameters" class="header-anchor">#</a> Route Parameters</h3> <p>You can capture route parameters as part of the route pattern definition:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/users/{userId}/books/{bookId}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> userId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> bookId<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;The user id is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">userId</span><span class="token punctuation">}</span></span><span class="token string"> and book id is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bookId</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The route handler can declare the parameters that it wants to capture, and when a request is made to this route, the parameters will be parsed and passed to the handler. This makes it easy to capture the values in a type safe way (above, you can be sure that the <code>userId</code> and <code>bookId</code> are both <code>int</code>).</p> <p>If the route values are not valid <code>int</code>s then an exception will be thrown. The following request will result in the exception below:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>GET /users/hello/books/3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to bind parameter &quot;int userId&quot; from &quot;hello&quot;.
    at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.ParameterBindingFailed(HttpContext httpContext, String parameterTypeName, String parameterName, String sourceValue, Boolean shouldThrow)
    at lambda_method1(Closure , Object , HttpContext )
    at Microsoft.AspNetCore.Http.RequestDelegateFactory.&lt;&gt;c__DisplayClass37_0.&lt;Create&gt;b__0(HttpContext httpContext)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="wildcards-catch-all-routes"><a href="#wildcards-catch-all-routes" class="header-anchor">#</a> Wildcards/Catch all routes</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/posts/{rest*}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> rest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Routing to </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">rest</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="route-constraints"><a href="#route-constraints" class="header-anchor">#</a> Route constraints</h3> <p>Route constraints are influence the matching behavior of a route.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos/{id:int}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span>Todos<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos/{text}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> text<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span>Todos<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Text<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/posts/{slug:regex(^[a-z0-9_-]+$)}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> slug<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Post </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">slug</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th>Path</th> <th>Match</th></tr></thead> <tbody><tr><td><code>/todos/1</code></td> <td><code>/todos/{id:int}</code></td></tr> <tr><td><code>/todos/something</code></td> <td><code>/todos/{text}</code></td></tr> <tr><td><code>/posts/mypost</code></td> <td><code>/posts/{slug:regex(^[a-z0-9_-]+$)}</code></td></tr> <tr><td><code>/posts/%</code></td> <td>No match</td></tr></tbody></table> <h3 id="built-in-contraints"><a href="#built-in-contraints" class="header-anchor">#</a> Built in contraints</h3> <table><thead><tr><th>constraint</th> <th>Example</th> <th>Example Matches</th> <th>Notes</th></tr></thead> <tbody><tr><td><code>int</code></td> <td><code>{id:int}</code></td> <td><code>123456789</code>, <code>-123456789</code></td> <td>Matches any integer</td></tr> <tr><td><code>bool</code></td> <td><code>{active:bool}</code></td> <td><code>true</code>, <code>FALSE</code></td> <td>Matches <code>true</code> or <code>false</code>. Case-insensitive</td></tr> <tr><td><code>datetime</code></td> <td><code>{dob:datetime}</code></td> <td><code>2016-12-31</code>, <code>2016-12-31 7:32pm</code></td> <td>Matches a valid <code>DateTime</code> value in the invariant culture. See preceding warning.</td></tr> <tr><td><code>decimal</code></td> <td><code>{price:decimal}</code></td> <td><code>49.99</code>, <code>-1,000.01</code></td> <td>Matches a valid <code>decimal</code> value in the invariant culture. See preceding warning.</td></tr> <tr><td><code>double</code></td> <td><code>{weight:double}</code></td> <td><code>1.234</code>, <code>-1,001.01e8</code></td> <td>Matches a valid <code>double</code> value in the invariant culture. See preceding warning.</td></tr> <tr><td><code>float</code></td> <td><code>{weight:float}</code></td> <td><code>1.234</code>, <code>-1,001.01e8</code></td> <td>Matches a valid <code>float</code> value in the invariant culture. See preceding warning.</td></tr> <tr><td><code>guid</code></td> <td><code>{id:guid}</code></td> <td><code>CD2C1638-1638-72D5-1638-DEADBEEF1638</code></td> <td>Matches a valid <code>Guid</code> value</td></tr> <tr><td><code>long</code></td> <td><code>{ticks:long}</code></td> <td><code>123456789</code>, <code>-123456789</code></td> <td>Matches a valid <code>long</code> value</td></tr> <tr><td><code>minlength(value)</code></td> <td><code>{username:minlength(4)}</code></td> <td><code>Rick</code></td> <td>String must be at least 4 characters</td></tr> <tr><td><code>maxlength(value)</code></td> <td><code>{filename:maxlength(8)}</code></td> <td><code>MyFile</code></td> <td>String must be no more than 8 characters</td></tr> <tr><td><code>length(length)</code></td> <td><code>{filename:length(12)}</code></td> <td><code>somefile.txt</code></td> <td>String must be exactly 12 characters long</td></tr> <tr><td><code>length(min,max)</code></td> <td><code>{filename:length(8,16)}</code></td> <td><code>somefile.txt</code></td> <td>String must be at least 8 and no more than 16 characters long</td></tr> <tr><td><code>min(value)</code></td> <td><code>{age:min(18)}</code></td> <td><code>19</code></td> <td>Integer value must be at least 18</td></tr> <tr><td><code>max(value)</code></td> <td><code>{age:max(120)}</code></td> <td><code>91</code></td> <td>Integer value must be no more than 120</td></tr> <tr><td><code>range(min,max)</code></td> <td><code>{age:range(18,120)}</code></td> <td><code>91</code></td> <td>Integer value must be at least 18 but no more than 120</td></tr> <tr><td><code>alpha</code></td> <td><code>{name:alpha}</code></td> <td><code>Rick</code></td> <td>String must consist of one or more alphabetical characters, <code>a</code>-<code>z</code> and case-insensitive.</td></tr> <tr><td><code>regex(expression)</code></td> <td><code>{ssn:regex(^\\d3-\\d2-\\d4$)}</code></td> <td><code>123-45-6789</code></td> <td>String must match the regular expression. See tips about defining a regular expression.</td></tr> <tr><td><code>required</code></td> <td><code>{name:required}</code></td> <td><code>Rick</code></td> <td>Used to enforce that a non-parameter value is present during URL generation</td></tr></tbody></table> <h2 id="parameter-binding"><a href="#parameter-binding" class="header-anchor">#</a> Parameter Binding</h2> <p>Parameter binding is the process of turning request data into strongly typed parameters that are expressed by route handlers. A binding source determines where parameters are bound from. Binding sources can be explict or inferred based HTTP method and parameter type.</p> <p>Supported binding sources:</p> <ul><li>Route values</li> <li>Query string</li> <li>Header</li> <li>Body (as JSON)</li> <li>Services provided by dependency injection</li> <li>Custom</li></ul> <h3 id="get-head-options-delete"><a href="#get-head-options-delete" class="header-anchor">#</a> GET, HEAD, OPTIONS, DELETE</h3> <p>The HTTP methods GET, HEAD, OPTIONS, DELETE will never bind from body. All other binding sources are supported.</p> <p><strong>NOTE: If you need to support the case where you have a GET with a body, you can directly read it from the HttpRequest.</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Added as service</span>
builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Service<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> page<span class="token punctuation">,</span> <span class="token class-name">Service</span> service<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Service</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><table><thead><tr><th>Parameter</th> <th>Binding Source</th></tr></thead> <tbody><tr><td>id</td> <td>route value</td></tr> <tr><td>page</td> <td>query string</td></tr> <tr><td>service</td> <td>provided by dependency injection</td></tr></tbody></table> <h3 id="other-verbs-post-put-patch-etc"><a href="#other-verbs-post-put-patch-etc" class="header-anchor">#</a> Other verbs (POST, PUT, PATCH, etc)</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Added as service</span>
builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Service<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">,</span> <span class="token class-name">Service</span> service<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Service</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token return-type class-name">record</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> Name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> Age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><table><thead><tr><th>Parameter</th> <th>Binding Source</th></tr></thead> <tbody><tr><td>person</td> <td>body (as JSON)</td></tr> <tr><td>service</td> <td>provided by dependency injection</td></tr></tbody></table> <h3 id="explicit-parameter-binding"><a href="#explicit-parameter-binding" class="header-anchor">#</a> Explicit Parameter Binding</h3> <p>Attributes can be used to explicitly declare where parameters should be bound from.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromRoute</span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">,</span> 
                     <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromQuery</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">int</span></span> page<span class="token punctuation">,</span> 
                     <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromServices</span></span><span class="token punctuation">]</span><span class="token class-name">Service</span> service<span class="token punctuation">,</span> 
                     <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromHeader</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">string</span></span> contentType<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><table><thead><tr><th>Parameter</th> <th>Binding Source</th></tr></thead> <tbody><tr><td>id</td> <td>route value with the name id</td></tr> <tr><td>page</td> <td>query string with the name <code>&quot;p&quot;</code></td></tr> <tr><td>service</td> <td>provided by dependency injection</td></tr> <tr><td>contentType</td> <td>header with the name <code>&quot;Content-Type&quot;</code></td></tr></tbody></table> <p>Binding from form values is not supported at this time.</p> <h3 id="optional-parameters"><a href="#optional-parameters" class="header-anchor">#</a> Optional parameters</h3> <p>Parameters declared in route handlers will be treated as required. This means if a request matches the route, the route handler will only execute if all required paramters are provided in the request. Failure to do so will result in an error.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> pageNumber<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Requesting page </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageNumber</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Since the <code>pageNumber</code> paramter is required, this route handler won't execute if the query string <code>pageNumber</code> isn't provided. To make it optional define the type as nullable.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> pageNumber<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Requesting page </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageNumber <span class="token operator">??</span> <span class="token number">1</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This also works with methods that have a default value:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ListProducts</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> pageNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Requesting page </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageNumber</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> ListProducts<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The above will default to 1 if the pageNumber isn't specified in the query string.</p> <p>This logic applies to all sources.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Product<span class="token punctuation">?</span></span> product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The above will call the method with a null product if no request body was sent.</p> <p><strong>NOTE: If invalid data is provided and the parameter is nullable, the route handler will not be executed.</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> pageNumber<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Requesting page </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageNumber <span class="token operator">??</span> <span class="token number">1</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The following request will result in a 400 (see the <strong>Binding Failures</strong> section below for more details)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>GET /products?pageNumber=two
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="special-types"><a href="#special-types" class="header-anchor">#</a> Special types</h3> <p>There are some special types that the framework supports binding without any explicit attributes:</p> <ul><li><code>HttpContext</code> - The context which holds all the information about the current http request/response.</li> <li><code>HttpRequest</code> - The http request</li> <li><code>HttpResponse</code> - The http reponse</li> <li><code>CancellationToken</code> - The cancellation token associated with the current http request.</li> <li><code>ClaimsPrincipal</code> - The user associated with the request (<code>HttpContext.User</code>).</li></ul> <h3 id="custom-binding"><a href="#custom-binding" class="header-anchor">#</a> Custom Binding</h3> <p>There are 2 ways to customize parameter binding:</p> <ol><li>For route, query, and header binding sources, you may bind custom types by adding a static <code>TryParse</code> method to your type.</li> <li>You can completely take over the binding process by implementing a <code>BindAsync</code> method on your type.</li></ol> <p><strong>TryParse</strong></p> <p>The TryParse method must be of the form(s):</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> T <span class="token keyword">out</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">IFormatProvider</span> provider<span class="token punctuation">,</span> T <span class="token keyword">out</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Example</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/map/{point}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Point</span> point<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Point: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">point<span class="token punctuation">.</span>X</span><span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">point<span class="token punctuation">.</span>Y</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Point</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> X <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Y <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">IFormatProvider<span class="token punctuation">?</span></span> provider<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">Point<span class="token punctuation">?</span></span> point<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Format is &quot;(12.3,10.1)&quot;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> trimmedValue <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">?.</span><span class="token function">TrimStart</span><span class="token punctuation">(</span><span class="token string character">'('</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TrimEnd</span><span class="token punctuation">(</span><span class="token string character">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> segments <span class="token operator">=</span> trimmedValue<span class="token punctuation">?.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string character">','</span><span class="token punctuation">,</span> StringSplitOptions<span class="token punctuation">.</span>RemoveEmptyEntries <span class="token operator">|</span> StringSplitOptions<span class="token punctuation">.</span>TrimEntries<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>segments<span class="token punctuation">?.</span>Length <span class="token operator">==</span> <span class="token number">2</span>
            <span class="token operator">&amp;&amp;</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>segments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> x<span class="token punctuation">)</span>
            <span class="token operator">&amp;&amp;</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>segments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span> <span class="token punctuation">{</span> X <span class="token operator">=</span> x<span class="token punctuation">,</span> Y <span class="token operator">=</span> y <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        point <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>A request to <code>/point?point=(12.3,10.1)</code> returns:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Point: 12.3,10.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>BindAsync</strong></p> <p>The <code>BindAsync</code> method must be of the form:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>T<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">BindAsync</span><span class="token punctuation">(</span><span class="token class-name">HttpContext</span> context<span class="token punctuation">,</span> <span class="token class-name">ParameterInfo</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Example</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">PagingData</span> pageData<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;SortBy:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageData<span class="token punctuation">.</span>SortBy</span><span class="token punctuation">}</span></span><span class="token string">, SortDirection:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageData<span class="token punctuation">.</span>SortDirection</span><span class="token punctuation">}</span></span><span class="token string">, CurrentPage:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">pageData<span class="token punctuation">.</span>CurrentPage</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PagingData</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> SortBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> init<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">SortDirection</span> SortDirection <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> init<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CurrentPage <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> init<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">ValueTask<span class="token punctuation">&lt;</span>PagingData<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">BindAsync</span><span class="token punctuation">(</span><span class="token class-name">HttpContext</span> context<span class="token punctuation">,</span> <span class="token class-name">ParameterInfo</span> parameter<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> sortByKey <span class="token operator">=</span> <span class="token string">&quot;sortBy&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> sortDirectionKey <span class="token operator">=</span> <span class="token string">&quot;sortDir&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> currentPageKey <span class="token operator">=</span> <span class="token string">&quot;page&quot;</span><span class="token punctuation">;</span>

        Enum<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryParse</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SortDirection<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Query<span class="token punctuation">[</span>sortDirectionKey<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">ignoreCase</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> sortDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Query<span class="token punctuation">[</span>currentPageKey<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
        page <span class="token operator">=</span> page <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> page<span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PagingData</span>
        <span class="token punctuation">{</span>
            SortBy <span class="token operator">=</span> context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Query<span class="token punctuation">[</span>sortByKey<span class="token punctuation">]</span><span class="token punctuation">,</span>
            SortDirection <span class="token operator">=</span> sortDirection<span class="token punctuation">,</span>
            CurrentPage <span class="token operator">=</span> page
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> ValueTask<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">FromResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PagingData<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">SortDirection</span>
<span class="token punctuation">{</span>
    Default<span class="token punctuation">,</span>
    Asc<span class="token punctuation">,</span>
    Desc
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="binding-failures"><a href="#binding-failures" class="header-anchor">#</a> Binding failures</h3> <p>When binding fails, the framework will log a debug message and it will return various status codes to the client
depending on the failure mode.</p> <table><thead><tr><th>Failure mode</th> <th>Nullable Parameter Type</th> <th>Binding Source</th> <th>Status code</th></tr></thead> <tbody><tr><td><code>{ParameterType}.TryParse</code> returns false</td> <td>yes</td> <td>route/query/header</td> <td>400</td></tr> <tr><td><code>{ParameterType}.BindAsync</code> returns null</td> <td>yes</td> <td>custom</td> <td>400</td></tr> <tr><td><code>{ParameterType}.BindAsync</code> throws</td> <td>does not matter</td> <td>custom</td> <td>500</td></tr> <tr><td>Failure to read JSON body</td> <td>does not matter</td> <td>body</td> <td>400</td></tr> <tr><td>Wrong content type (not application/json)</td> <td>does not matter</td> <td>body</td> <td>415</td></tr></tbody></table> <h3 id="binding-precedence"><a href="#binding-precedence" class="header-anchor">#</a> Binding Precedence</h3> <p>The rules for determining a binding source from a parameter are as follows:</p> <ol><li>Explicit attribute defined on parameter (From* attributes) in the following order:
<ol><li>Route values (<code>FromRoute</code>)</li> <li>Query string (<code>FromQuery</code>)</li> <li>Header (<code>FromHeader</code>)</li> <li>Body (<code>FromBody</code>)</li> <li>Service (<code>FromServices</code>)</li></ol></li> <li>Special types
<ol><li><code>HttpContext</code></li> <li><code>HttpRequest</code></li> <li><code>HttpResponse</code></li> <li><code>ClaimsPrincipal</code></li> <li><code>CancellationToken</code></li></ol></li> <li>Parameter type has a valid <code>BindAsync</code> method.</li> <li>Parameter type is a string or has a valid <code>TryParse</code> method.
<ol><li>If the parameter name exists in the route template e.g. <code>app.Map(&quot;/todo/{id}&quot;, (int id) =&gt; {});</code>, then it will be bound from the route.</li> <li>It will be bound from the query string.</li></ol></li> <li>If the parameter type is a service provided by dependency injection, it will use that as the source.</li> <li>The parameter is from the body.</li></ol> <h3 id="customizing-json-binding"><a href="#customizing-json-binding" class="header-anchor">#</a> Customizing JSON binding</h3> <p>The body binding source uses System.Text.Json for de-serialization. It is <em>NOT</em> possible to change this default but you can customize
the binding using other techniques described in above sections. To customize JSON serializer options, you can use
the following:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>Json</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Configure JSON options</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Configure</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>JsonOptions<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>SerializerOptions<span class="token punctuation">.</span>IncludeFields <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">MapPost</span><span class="token punctuation">(</span><span class="token string">&quot;/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Product</span>
<span class="token punctuation">{</span>
    <span class="token comment">// These are public fields instead of properties</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> Id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> Name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>This configures both the input and output default JSON options.</p> <h2 id="responses"><a href="#responses" class="header-anchor">#</a> Responses</h2> <p>Route handlers support 2 types of return values:</p> <ol><li><code>IResult</code> based - This includes <code>Task&lt;IResult&gt;</code> and <code>ValueTask&lt;IResult&gt;</code></li> <li><code>string</code> - This includes <code>Task&lt;string&gt;</code> and <code>ValueTask&lt;string&gt;</code></li> <li><code>T</code> (Any other type) - This includes <code>Task&lt;T&gt;</code> and <code>ValueTask&lt;T&gt;</code></li></ol> <table><thead><tr><th>Return value</th> <th>Behavior</th> <th>Content-Type</th></tr></thead> <tbody><tr><td><code>IResult</code></td> <td>The framework calls <code>IResult.ExecuteAsync</code></td> <td>Decided by the <code>IResult</code> implementation</td></tr> <tr><td><code>string</code></td> <td>The framework writes the string directly to the response</td> <td><code>text/plain</code></td></tr> <tr><td><code>T</code> (Any other type)</td> <td>The framework will JSON serialize the response</td> <td><code>application/json</code></td></tr></tbody></table> <p><strong>Example: string return values</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Example: JSON return values</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Example: IResult return values</strong></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span><span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> Message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The following example uses the built-in result types to customize the response:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/todos/{id}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">,</span> <span class="token class-name">TodoDb</span> db<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    db<span class="token punctuation">.</span>Todos<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token class-name">Todo</span> <span class="token return-type class-name">todo 
        <span class="token punctuation">?</span></span> Results<span class="token punctuation">.</span><span class="token function">Ok</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> Results<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="json"><a href="#json" class="header-anchor">#</a> JSON</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span><span class="token function">Json</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> Message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="custom-status-code"><a href="#custom-status-code" class="header-anchor">#</a> Custom Status Code</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/405&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span><span class="token function">StatusCode</span><span class="token punctuation">(</span><span class="token number">405</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="text"><a href="#text" class="header-anchor">#</a> Text</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;This is some text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="stream"><a href="#stream" class="header-anchor">#</a> Stream</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> proxyClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/pokemon&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> stream <span class="token operator">=</span> <span class="token keyword">await</span> proxyClient<span class="token punctuation">.</span><span class="token function">GetStreamAsync</span><span class="token punctuation">(</span><span class="token string">&quot;http://myurl/pokedex.json&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// Proxy the response as JSON</span>
    <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">Stream</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="redirect"><a href="#redirect" class="header-anchor">#</a> Redirect</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/old-path&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/new-path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="file"><a href="#file" class="header-anchor">#</a> File</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/download&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;foo.text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="built-in-results"><a href="#built-in-results" class="header-anchor">#</a> Built-in results</h3> <p>Common result helpers exist on the <code>Microsoft.AspNetCore.Http.Results</code> static class.</p> <table><thead><tr><th>Description</th> <th>Response type</th> <th>Status Code</th> <th>API</th></tr></thead> <tbody><tr><td>Write a JSON response with advanced options</td> <td>application/json</td> <td>200</td> <td><code>Results.Json</code></td></tr> <tr><td>Write a JSON response</td> <td>application/json</td> <td>200</td> <td><code>Results.Ok</code></td></tr> <tr><td>Write a text response</td> <td>text/plain (default), configurable</td> <td>200</td> <td><code>Results.Text</code></td></tr> <tr><td>Write the response as bytes</td> <td>application/octet-stream (default), configurable</td> <td>200</td> <td><code>Results.Bytes</code></td></tr> <tr><td>Write a stream of bytes to the response</td> <td>application/octet-stream (default), configurable</td> <td>200</td> <td><code>Results.Stream</code></td></tr> <tr><td>Stream a file to the response for download with the content-disposition header</td> <td>application/octet-stream (default), configurable</td> <td>200</td> <td><code>Results.File</code></td></tr> <tr><td>Set the status code to 404, with an optional JSON response</td> <td>N/A</td> <td>404</td> <td><code>Results.NotFound</code></td></tr> <tr><td>Set the status code to 204</td> <td>N/A</td> <td>204</td> <td><code>Results.NoContent</code></td></tr> <tr><td>Set the status code to 422, with an optional JSON response</td> <td>N/A</td> <td>422</td> <td><code>Results.UnprocessableEntity</code></td></tr> <tr><td>Set the status code to 400, with an optional JSON response</td> <td>N/A</td> <td>400</td> <td><code>Results.BadRequest</code></td></tr> <tr><td>Set the status code to 409, with an optional JSON response</td> <td>N/A</td> <td>409</td> <td><code>Results.Conflict</code></td></tr> <tr><td>Write a problem details JSON object to the response</td> <td>N/A</td> <td>500 (default), configurable</td> <td><code>Results.Problem</code></td></tr> <tr><td>Write a problem details JSON object to the response with validation errors</td> <td>N/A</td> <td>N/A, configurable</td> <td><code>Results.ValidationProblem</code></td></tr></tbody></table> <h3 id="customizing-results"><a href="#customizing-results" class="header-anchor">#</a> Customizing results</h3> <p>Users can take control of responses by implementing a custom <code>IResult</code> type. Here's an example of an HTML result type:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Http</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ResultsExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IResult</span> <span class="token function">Html</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IResultExtensions</span> resultExtensions<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> html<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ArgumentNullException<span class="token punctuation">.</span><span class="token function">ThrowIfNull</span><span class="token punctuation">(</span>resultExtensions<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>resultExtensions<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HtmlResult</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">HtmlResult</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IResult</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">string</span></span> _html<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">HtmlResult</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> html<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _html <span class="token operator">=</span> html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Task</span> <span class="token function">ExecuteAsync</span><span class="token punctuation">(</span><span class="token class-name">HttpContext</span> httpContext<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        httpContext<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>ContentType <span class="token operator">=</span> MediaTypeNames<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>Html<span class="token punctuation">;</span>
        httpContext<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>ContentLength <span class="token operator">=</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetByteCount</span><span class="token punctuation">(</span>_html<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> httpContext<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span>_html<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>We recommend adding an extension method to <code>Microsoft.AspNetCore.Http.IResultExtensions</code> to make these custom results more discoverable.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Results<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span><span class="token function">Html</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">@$&quot;&lt;!doctype html&gt;
&lt;html&gt;
    &lt;head&gt;&lt;title&gt;miniHTML&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello World&lt;/h1&gt;
        &lt;p&gt;The time on the server is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">DateTime<span class="token punctuation">.</span>Now</span><span class="token format-string"><span class="token punctuation">:</span>O</span><span class="token punctuation">}</span></span><span class="token string">&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="authorization"><a href="#authorization" class="header-anchor">#</a> Authorization</h2> <p>Routes can be protected using authorization policies. These can be declared via the authorize attribute or by using the <code>RequireAuthorization</code> method call.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span></span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This endpoint requires authorization&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>OR</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This endpoint requires authorization&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">RequireAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Authorization policies can be configured as well:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;AdminsOnly&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This endpoint is for admins only&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>OR</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;This endpoint is for admins only&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">RequireAuthorization</span><span class="token punctuation">(</span><span class="token string">&quot;AdminsOnly&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="openapi-swagger"><a href="#openapi-swagger" class="header-anchor">#</a> OpenAPI/Swagger</h2> <p>It's possible to describe the OpenAPI specification for route handlers using <a href="https://www.nuget.org/packages/Swashbuckle.AspNetCore/" target="_blank" rel="noopener noreferrer">Swashbuckle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Below is an example of a typical ASP.NET Core application with OpenAPI suppport:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddEndpointsApiExplorer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Title <span class="token operator">=</span> builder<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>ApplicationName<span class="token punctuation">,</span> Version <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">UseSwagger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/swagger/v1/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">builder<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>ApplicationName</span><span class="token punctuation">}</span></span><span class="token string"> v1&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="describing-response-types"><a href="#describing-response-types" class="header-anchor">#</a> Describing response types</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/api/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">,</span> <span class="token class-name">ProductDb</span> db<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span>Products<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token class-name">Product</span> <span class="token return-type class-name">product <span class="token punctuation">?</span></span> Results<span class="token punctuation">.</span><span class="token function">Ok</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token punctuation">:</span> Results<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Produces</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Product<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">Produces</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="exclude-open-api-description"><a href="#exclude-open-api-description" class="header-anchor">#</a> Exclude Open API description</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/skipme&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">ExcludeFromDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="add-operation-ids-to-open-api"><a href="#add-operation-ids-to-open-api" class="header-anchor">#</a> Add operation ids to Open API</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/api/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">ProductDb</span> db<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span>Products<span class="token punctuation">.</span><span class="token function">ToListAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">WithName</span><span class="token punctuation">(</span><span class="token string">&quot;GetProducts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="add-tags-to-the-open-api-description-used-for-grouping"><a href="#add-tags-to-the-open-api-description-used-for-grouping" class="header-anchor">#</a> Add tags to the Open API description (used for grouping)</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/api/products&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">ProductDb</span> db<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span>Products<span class="token punctuation">.</span><span class="token function">ToListAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">WithTags</span><span class="token punctuation">(</span><span class="token string">&quot;ProductsGroup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="describe-request-body"><a href="#describe-request-body" class="header-anchor">#</a> Describe request body</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token class-name">HttpRequest</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span>HasFormContentType<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name"><span class="token keyword">var</span></span> form <span class="token operator">=</span> <span class="token keyword">await</span> req<span class="token punctuation">.</span><span class="token function">ReadFormAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> file <span class="token operator">=</span> form<span class="token punctuation">.</span>Files<span class="token punctuation">[</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name"><span class="token keyword">var</span></span> uploads <span class="token operator">=</span> Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>uploadsPath<span class="token punctuation">,</span> file<span class="token punctuation">.</span>FileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> fileStream <span class="token operator">=</span> File<span class="token punctuation">.</span><span class="token function">OpenWrite</span><span class="token punctuation">(</span>uploads<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> uploadStream <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">OpenReadStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> uploadStream<span class="token punctuation">.</span><span class="token function">CopyToAsync</span><span class="token punctuation">(</span>fileStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">NoContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Accepts</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFormFile<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;multipart/form-data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b5e398f3.js" defer></script><script src="/assets/js/2.9f025ea5.js" defer></script><script src="/assets/js/15.f83e5e20.js" defer></script>
  </body>
</html>
